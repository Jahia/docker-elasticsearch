name: Elasticsearch docker tagging

on:
  workflow_dispatch:
  schedule:
    - cron:  '0 2 * * *' # run at 2am UTC

jobs:
  elasticsearch-tag:
    name: Tag elasticsearch versions
    runs-on: ubuntu-latest
    steps:
      - name: Checkout source
        uses: actions/checkout@v3 
      - name: Docker login
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_PASSWORD }}
      - name: Tag elasticsearch versions
        run: bash ${GITHUB_WORKSPACE}/scripts/es-tag.sh library/elasticsearch
      - name: Tag kibana versions
        run: bash ${GITHUB_WORKSPACE}/scripts/es-tag.sh library/kibana
